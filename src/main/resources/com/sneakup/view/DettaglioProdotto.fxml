<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.text.TextFlow?>

<BorderPane prefHeight="800.0" prefWidth="1200.0" style="-fx-background-color: white;" stylesheets="@/style.css" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.sneakup.view.gui.cliente.DettaglioProdottoGUIController">

    <top>
        <VBox style="-fx-background-color: #ff0000;">
            <children>
                <HBox alignment="CENTER_LEFT" prefHeight="85.0" spacing="20.0" style="-fx-padding: 0 30 0 30;">
                    <children>
                        <HBox alignment="CENTER_LEFT" onMouseClicked="#handleReloadHomeMouse" spacing="0" style="-fx-cursor: hand;">
                            <children>
                                <Label text="Sneak" textFill="WHITE"><font><Font name="System Bold" size="36.0" /></font></Label>
                                <Label text="Up" textFill="BLACK"><font><Font name="System Bold" size="36.0" /></font></Label>
                            </children>
                        </HBox>

                        <Region HBox.hgrow="ALWAYS" />

                        <HBox alignment="CENTER" onMouseExited="#nascondiBarra" spacing="35.0">
                            <children>
                                <Button fx:id="btnHome" onAction="#handleReloadHome" onMouseEntered="#mostraEmuoviBarra" styleClass="nav-button" text="Home" />
                                <Button fx:id="btnCarrello" onAction="#handleVaiAlCarrello" onMouseEntered="#mostraEmuoviBarra" styleClass="nav-button" text="Carrello" />
                                <Button fx:id="btnStato" onAction="#handleStatoOrdine" onMouseEntered="#mostraEmuoviBarra" styleClass="nav-button" text="Stato ordine" />
                                <Button fx:id="btnPreferiti" onAction="#handlePreferiti" onMouseEntered="#mostraEmuoviBarra" styleClass="nav-button" text="Preferiti" />
                            </children>
                        </HBox>

                        <Region HBox.hgrow="ALWAYS" />

                        <HBox alignment="CENTER" spacing="25.0">
                            <children>
                                <ImageView fitHeight="45.0" fitWidth="70.0" onMouseEntered="#iconaEntra" onMouseExited="#iconaEsce" pickOnBounds="true" preserveRatio="true" style="-fx-cursor: hand;">
                                    <image><Image url="@/images/Bandiera 1.png" /></image>
                                </ImageView>

                                <StackPane>
                                    <children>
                                        <Button fx:id="btnLogin" onAction="#handleLoginGenerico" onMouseEntered="#iconaEntra" onMouseExited="#iconaEsce" styleClass="login-button" text="Login" />

                                        <Label fx:id="lblUser"
                                               visible="false"
                                               managed="false"
                                               textFill="WHITE"
                                               onMouseClicked="#handleVaiAreaPersonale"
                                               onMouseEntered="#sottolineaUser"
                                               onMouseExited="#ripristinaUser"
                                               style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-cursor: hand;" />
                                    </children>
                                </StackPane>
                            </children>
                        </HBox>
                    </children>
                </HBox>

                <Pane prefHeight="8.0">
                    <VBox.margin><Insets bottom="5.0" top="-15.0" /></VBox.margin>
                    <children>
                        <Region fx:id="barraAnimata" opacity="0.0" prefHeight="4.0" style="-fx-background-color: white; -fx-background-radius: 2;" />
                    </children>
                </Pane>
            </children>
        </VBox>
    </top>

    <center>
        <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
            <content>
                <VBox spacing="20.0" style="-fx-background-color: white;">
                    <padding><Insets bottom="40" left="50" right="50" top="20" /></padding>
                    <children>
                        <Button onAction="#handleIndietro" text="← Torna indietro" style="-fx-background-color: transparent; -fx-text-fill: #555; -fx-font-size: 14px; -fx-cursor: hand;" />

                        <HBox spacing="40.0" alignment="TOP_CENTER">
                            <children>
                                <StackPane prefHeight="350.0" prefWidth="500.0" style="-fx-border-color: #eeeeee; -fx-border-radius: 10;">
                                    <children>
                                        <ImageView fx:id="imgScarpa" fitHeight="300.0" fitWidth="450.0" preserveRatio="true" />
                                    </children>
                                </StackPane>

                                <VBox spacing="15.0" HBox.hgrow="ALWAYS">
                                    <children>
                                        <HBox spacing="10" alignment="CENTER_LEFT">
                                            <Label fx:id="lblModello" text="Nike Caricamento...">
                                                <font><Font name="System Bold" size="28.0" /></font>
                                            </Label>
                                            <Label text="★★★★☆" textFill="#e0a91f" style="-fx-font-size: 20px;" />
                                        </HBox>

                                        <GridPane hgap="15" vgap="15">
                                            <Label text="Seleziona la taglia" GridPane.rowIndex="0" GridPane.columnIndex="0" style="-fx-font-size: 16px;" />
                                            <ComboBox fx:id="comboTaglia" prefWidth="120.0" promptText="36 EU" GridPane.rowIndex="0" GridPane.columnIndex="1" />

                                            <Label text="Seleziona il colore" GridPane.rowIndex="1" GridPane.columnIndex="0" style="-fx-font-size: 16px;" />
                                            <ComboBox fx:id="comboColore" prefWidth="150.0" promptText="Green/Barely" GridPane.rowIndex="1" GridPane.columnIndex="1" />
                                        </GridPane>

                                        <Label fx:id="lblPrezzo" text="Caricamento ..." style="-fx-font-size: 22px;">
                                            <font><Font name="System Regular" size="22.0" /></font>
                                        </Label>

                                        <HBox spacing="20.0" style="-fx-padding: 20 0 0 0;">
                                            <VBox alignment="CENTER" spacing="5">
                                                <Button onAction="#handleAcquista" text="Acquista ora"
                                                        style="-fx-background-color: #ff0000; -fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 16px; -fx-padding: 10 30; -fx-background-radius: 8; -fx-cursor: hand;" />
                                            </VBox>

                                            <VBox alignment="CENTER" spacing="5">
                                                <Button onAction="#handleAggiungiAlCarrello" text="Aggiungi al carrello"
                                                        style="-fx-background-color: #ff0000; -fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 16px; -fx-padding: 10 30; -fx-background-radius: 8; -fx-cursor: hand;" />
                                            </VBox>
                                        </HBox>
                                    </children>
                                </VBox>
                            </children>
                        </HBox>

                        <Separator style="-fx-padding: 20 0;" />

                        <HBox spacing="40.0" alignment="TOP_LEFT">
                            <children>
                                <VBox spacing="10.0" maxWidth="600.0" HBox.hgrow="ALWAYS">
                                    <Label text="Descrizione del prodotto" style="-fx-font-size: 24px; -fx-font-weight: bold;" />
                                    <TextFlow>
                                        <Text fx:id="txtDescrizione" style="-fx-font-size: 14px; -fx-fill: #333;" text="Caricamento..." />
                                    </TextFlow>
                                    <Label fx:id="lblInfoExtra" text="Colore mostrato in foto: ..." style="-fx-text-fill: grey;" />
                                </VBox>

                                <Separator orientation="VERTICAL" />

                                <VBox spacing="15.0" prefWidth="500.0" HBox.hgrow="ALWAYS">
                                    <Label text="Recensioni del prodotto" style="-fx-font-size: 24px; -fx-font-weight: bold;" />
                                    <VBox spacing="10" fx:id="containerRecensioni">
                                        <VBox style="-fx-border-color: #ddd; -fx-border-radius: 8; -fx-padding: 10;">
                                            <Label text="Marco" style="-fx-font-weight: bold; -fx-font-size: 16px;" />
                                            <Label text="★★★★★" textFill="#e0a91f" />
                                            <Label text="Scarpa fantastica!" wrapText="true" />
                                        </VBox>
                                    </VBox>
                                </VBox>
                            </children>
                        </HBox>

                    </children>
                </VBox>
            </content>
        </ScrollPane>
    </center>
</BorderPane>